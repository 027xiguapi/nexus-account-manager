# 窗口行为说明

## 关闭行为

应用程序已配置为在用户点击关闭按钮时**隐藏窗口并在后台继续运行**，而不是完全退出。

### 实现细节

1. **窗口事件处理** (`src-tauri/src/lib.rs`)
   - 监听 `CloseRequested` 事件
   - 调用 `api.prevent_close()` 阻止默认关闭行为
   - 调用 `window.hide()` 隐藏窗口，应用继续在后台运行

2. **系统托盘** (`src-tauri/src/lib.rs`)
   - 应用启动时创建系统托盘图标
   - 托盘菜单包含：
     - **显示窗口**：显示并聚焦主窗口
     - **退出**：完全退出应用程序
   - 左键点击托盘图标：切换窗口显示/隐藏状态
   - 右键点击托盘图标：显示菜单

3. **控制台输出** (`src-tauri/src/main.rs`)
   - Debug 模式下显示控制台窗口
   - 可以查看日志输出和调试信息
   - Release 模式下可通过 `console` feature 启用控制台

### 用户体验

- **点击关闭按钮** → 窗口关闭，应用在后台运行，托盘图标保持显示
- **左键点击托盘图标** → 切换窗口显示/隐藏
- **右键点击托盘图标** → 显示菜单（显示窗口/退出）
- **托盘菜单 - 显示窗口** → 显示并聚焦主窗口
- **托盘菜单 - 退出** → 完全退出应用程序
- **双击运行已启动的应用** → 自动显示并聚焦窗口

### 开发模式

在开发模式下运行时，控制台窗口会显示，可以看到：
- 应用启动日志
- 窗口事件日志（如 "Close requested - hiding window and running in background"）
- 托盘事件日志（如 "Window shown from tray"）
- 其他调试信息

### 构建选项

如果需要在 Release 版本中启用控制台：
```bash
cargo build --release --features console
```

### 依赖

系统托盘功能使用 `tray-icon` crate 实现，已添加到 `Cargo.toml` 依赖中。
